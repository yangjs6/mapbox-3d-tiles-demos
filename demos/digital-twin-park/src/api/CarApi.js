//该类主要用于车辆的动画
class CarApi {
  constructor(map, scene, group) {
    this._map = map;
    this._scene = scene || null;
    this._group = group || null;
  }

  _getUuid() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(
      /[xy]/g,
      function (c) {
        var r = (Math.random() * 16) | 0,
          v = c == 'x' ? r : (r & 0x3) | 0x8;
        return v.toString(16);
      }
    );
  }

  initCar() {
    let carPaths = [
      {
        s: 30000,
        coord: [
          [120.73298001334099, 31.287590355901955, 7.067983162869322],
          [120.73085428179544, 31.287592792848983, 7.0679829437293495],
          [120.72971212935782, 31.28758512524997, 7.067983633230293],
          [120.72890788261878, 31.28758946244285, 7.067983243212716],
          [120.7283663988581, 31.28760327386899, 7.0679820012342764],
          [120.72834815296547, 31.28782738454053, 7.0679618482571005],
          [120.728348563117, 31.28840236435959, 7.067910143187581],
          [120.72835201823979, 31.289045220115707, 7.0678523335926435],
          [120.72835265516758, 31.289209016908583, 7.067837603832728],
          [120.72880615082413, 31.289210420967702, 7.067837477569624],
          [120.72933061455416, 31.289183750889126, 7.0678398759344505],
          [120.73313241566966, 31.288999315639824, 7.067856461636449],
        ],
      },
      {
        s: 30000,
        coord: [
          [120.72580406892274, 31.287413307358513, 7.06799908374595],
          [120.72777667112805, 31.287408709639475, 7.067999497189458],
          [120.7288786165383, 31.287407894317642, 7.0679995705061724],
          [120.73022410851547, 31.2874040578806, 7.06799991549241],
          [120.7321998181452, 31.287408173146385, 7.06799954543285],
          [120.73386789470727, 31.28740523173713, 7.067999809935006],
          [120.73463063008647, 31.287399692031354, 7.068000308085265],
          [120.73547239297935, 31.28740558706819, 7.067999777982395],
        ],
      },
      {
        s: 30000,
        coord: [
          [120.73111269279953, 31.2891841780607, 7.067839837520146],
          [120.73046470865498, 31.28921053738567, 7.067837467100479],
          [120.7296457735854, 31.289255512973185, 7.067833422569749],
          [120.72895872534497, 31.289282487218202, 7.067830996848242],
          [120.72857894552563, 31.289301777719583, 7.067829262104303],
          [120.72836557061245, 31.289313729671527, 7.0678281872964],
          [120.72816247752957, 31.289326291763953, 7.067827057619805],
          [120.72817321218594, 31.288332669302374, 7.0679164105518435],
          [120.72817181332253, 31.287781081166475, 7.067966012060074],
          [120.72820587932628, 31.287078136283903, 7.06802922342929],
          [120.72821345653783, 31.286874688244648, 7.068047518035606],
        ],
      },
      {
        s: 20000,
        coord: [
          [120.73203227884768, 31.287542767786857, 7.067987442179321],
          [120.73164830996997, 31.28754122392803, 7.067987581009069],
          [120.73082065666016, 31.28754102060878, 7.0679875992923415],
          [120.72987103207919, 31.287544833644574, 7.067987256409387],
          [120.72900221890913, 31.287540712682848, 7.067987626982196],
          [120.72867854640084, 31.287536359033318, 7.067988018479198],
          [120.72770452768535, 31.287543288603143, 7.067987395345486],
          [120.7272917333278, 31.287539023711595, 7.0679877788610455],
          [120.72688269279251, 31.287541434824707, 7.067987562044425],
        ],
      },
      {
        s: 20000,
        coord: [
          [120.72830865632814, 31.286341660259282, 7.0680954489840415],
          [120.72830990295142, 31.286787830586416, 7.068055328489534],
          [120.72830889092887, 31.287130919859454, 7.068024476971768],
          [120.72832295822556, 31.28744203554392, 7.067996500402823],
          [120.72868322405712, 31.287455532971602, 7.067995286664351],
          [120.72979609901397, 31.28744580175042, 7.067996161731681],
          [120.73379304489589, 31.287450176850804, 7.067995768306532],
        ],
      },
      {
        s: 20000,
        coord: [
          [120.73227757172413, 31.28750103598864, 7.067991194862579],
          [120.73081225329358, 31.28750000921987, 7.067991287193521],
          [120.73017413828453, 31.287497099803453, 7.067991548819299],
          [120.72939204148697, 31.287495248212682, 7.067991715321308],
          [120.72865815429407, 31.28749132063532, 7.067992068503896],
          [120.72813190453884, 31.287476555847, 7.067993396209111],
          [120.72814157687829, 31.28708080275151, 7.068028983652656],
          [120.72815661338036, 31.286812277623852, 7.068053130153403],
          [120.72815367930018, 31.286462002926484, 7.068084627578894],
          [120.72816044451791, 31.28609716999599, 7.068117433850666],
          [120.72816243002373, 31.28584053696208, 7.068140510481985],
        ],
      },
      {
        s: 20000,
        coord: [
          [120.72690785279806, 31.287371108651612, 7.068002878404545],
          [120.72783283892039, 31.287366115631666, 7.068003327394534],
          [120.72860983578497, 31.287367441024195, 7.068003208210585],
          [120.72924197845079, 31.28737275274058, 7.068002730562276],
          [120.73008917299342, 31.287366152203592, 7.06800332410584],
          [120.73021671788524, 31.287367527876924, 7.068003200400464],
          [120.73072955290459, 31.2873749792528, 7.068002530346418],
          [120.730890760874, 31.287370692501963, 7.068002915826195],
          [120.731151634919, 31.28736910012375, 7.068003059018501],
          [120.73131652226161, 31.2873677160663, 7.0680031834778125],
        ],
      },
    ];
    let ms = [
      'car1',
      'car2',
      'car3',
      'car4',
      'car5',
      'car6',
      'car6',
    ];

    let _this = this;
    for (let i = 0; i < carPaths.length; i++) {

      let uuid = this._getUuid();
      
      this._scene.addModel({
        id: uuid,
        rootUrl: './assets/models/cars/' + ms[i] + '.glb',
        position: [120.73062035254365, 31.288398677612456],
        rotation: [0, 0, 0],
        scale: 1,
        offset: [0, 0, 0],
        callback: function (modelObject) {
          // 车辆移动动画
          _this._scene.addPath(modelObject,
            { id: uuid, path: carPaths[i].coord, duration: carPaths[i].s }
          );
        }
      });
    }
  }
}

export default CarApi;
