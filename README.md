

<h3 align="center">mapbox-3d-tiles-demos</h3>

---

<p align="center"> é›†æˆ mapbox-gl ä¸ threejs å®ç°åœ¨åœ°åœ–ä¸Šæ¸²æŸ“ 3dtiles ã€3DGSã€gltfã€Meshã€Object æ¨¡å‹ç­‰åŠŸèƒ½ã€‚ 
    <br> 
</p>


## ğŸ§ èƒŒæ™¯ä»‹ç» <a name = "about"></a>

æœ€åˆè€ƒæ…®åœ¨ threejs ä¸­æ¸²æŸ“ 3dtilesï¼Œä»¥æ›¿æ› mapbox-gl + deck.gl çš„è§£æ±ºæ–¹æ¡ˆã€‚
å¾Œä¾†ç™¼ç¾ threejs ä¸Šé‚„å¯ä»¥åšæ›´å¤šåŠŸèƒ½ï¼Œä¾‹å¦‚ 3DGS æ¨¡å‹ã€gltf æ¨¡å‹ç­‰ã€‚

å› æ­¤ï¼Œæ±ºå®šå°‡ mapbox-gl èˆ‡ threejs æ•´åˆï¼Œä»¥æä¾›æ›´å¼·å¤§çš„æ¸²æŸ“åŠŸèƒ½ã€‚

## ğŸ”§ åŠŸèƒ½èªªæ˜ <a name = "features"></a>

1. æ”¯æŒå°‡ threejs å’Œ mapbox é›†æˆï¼Œç›¸æ©ŸåŒæ­¥ç­‰
2. æ”¯æŒåœ¨ threejs ä¸­æ¸²æŸ“ 3dtilesã€3DGSã€gltf æ¨¡å‹ç­‰ï¼Œåº§æ¨™å°ä½
3. v1.0.0 æ›´æ–°ï¼šæ”¯æŒåœ¨ threejs å’Œ mapbox ä¸­é€²è¡Œç¬¬ä¸‰äººç¨±è¦–è§’ä¸‹çš„æ“ä½œï¼Œå¦‚ç„¡äººæ©Ÿæˆ–è§’è‰²æ§åˆ¶ï¼Œæ•ˆæœå‚è€ƒä»¥ä¸‹ç¤ºä¾‹è§†é¢‘
4. v1.0.0 æ›´æ–°ï¼šæ”¯æŒå°† 3DGS æ•°æ®åˆ‡ç‰‡æˆ 3dtiles æ•°æ®ï¼Œå¹¶ä½¿ç”¨ tileset æ–¹å¼åŠ è½½ï¼Œæ•ˆæœå‚è€ƒä»¥ä¸‹ç¤ºä¾‹è§†é¢‘ã€‚å·¥å…·å‚è€ƒ https://github.com/yangjs6/splat-3dtiles
5. v1.1.0 æ›´æ–°ï¼šæ”¯æŒå„ç±» mesh/object åˆ›å»ºï¼ŒåŒ…æ‹¬ç‚¹ã€çº¿ã€é¢ã€ä½“çš„å¯è§†åŒ–ï¼Œå¦‚å»ºç­‘ã€é“è·¯ã€åœ°ç†å›´æ ç­‰

æ›´å¤šåŠŸèƒ½å·²ç¶“å¯¦ç¾ï¼Œä½†æœªé–‹æºï¼Œè«‹æœŸå¾…ï¼


## ğŸš€ ç¤ºä¾‹åœ–é›† <a name = "demovideos"></a>



- æ™ºæ…§å›­åŒºå¯è§†åŒ–ç¤ºä¾‹ï¼Œç‚¹å‡»å›¾ç‰‡ï¼Œå¯è·³è½¬åˆ° b ç«™æŸ¥çœ‹ç›¸å…³è§†é¢‘ã€‚

[![](https://i0.hdslb.com/bfs/archive/07584eec5dc3772edd20cff624103da41e160f40.jpg@672w_378h_1c.webp)](https://www.bilibili.com/video/BV1L3tUz7E73)



- åŠ è½½å„ç±» mesh ç¤ºä¾‹ï¼Œç‚¹å‡»å›¾ç‰‡ï¼Œå¯è·³è½¬åˆ° b ç«™æŸ¥çœ‹ç›¸å…³è§†é¢‘ã€‚

[![](https://i0.hdslb.com/bfs/archive/f4ddec70d9b54a11fb6f631ee7d96969eb86ed3b.jpg@672w_378h_1c.webp)](https://www.bilibili.com/video/BV16FtUzREk8)



- åŠ è½½å¤§èŒƒå›´ tileset/3dgs å¯¹æ¯”ï¼Œç‚¹å‡»å›¾ç‰‡ï¼Œå¯è·³è½¬åˆ° b ç«™æŸ¥çœ‹ç›¸å…³è§†é¢‘ã€‚

[![](https://i2.hdslb.com/bfs/archive/b61f14f13c154292a1aa0813b74363b9d3b1841c.jpg@672w_378h_1c.webp)](https://www.bilibili.com/video/BV1eyuBzuErq/)


- åŠ è½½å¤§èŒƒå›´ tilesetï¼Œç‚¹å‡»å›¾ç‰‡ï¼Œå¯è·³è½¬åˆ° b ç«™æŸ¥çœ‹ç›¸å…³è§†é¢‘ã€‚

[![](https://i0.hdslb.com/bfs/archive/5d1b146ba418aa9c9293b8c2c6a34ccc1db47056.jpg@672w_378h_1c.webp)](https://www.bilibili.com/video/BV19eK3znEJt/)

- åŠ è½½å¤§èŒƒå›´ 3dgsï¼Œç‚¹å‡»å›¾ç‰‡ï¼Œå¯è·³è½¬åˆ° b ç«™æŸ¥çœ‹ç›¸å…³è§†é¢‘ã€‚

[![](https://i1.hdslb.com/bfs/archive/1b5f45ff4232e7362b488fc8eb5818c0aba69829.jpg@672w_378h_1c.webp)](https://www.bilibili.com/video/BV17ZuqzrELp/)



## ğŸ ç¤ºä¾‹ä½¿ç”¨ <a name = "getting_started"></a>

### åˆå§‹åŒ–

åˆå§‹åŒ– mapbox-gl çš„ mapï¼Œåœ¨ map çš„ load äº‹ä»¶ä¸­æ·»åŠ  ThreejsSceneLayerï¼Œå¹¶è¿›ä¸€æ­¥æ·»åŠ  tileset ã€ 3dgs ã€gltfã€glb ç­‰æ¨¡å‹ã€‚

```javascript
map.on('load', function () {
    var scene = new ThreejsSceneLayer({
        id: 'test-scene',
        refCenter: refCenter,
    });

    map.addLayer(scene);

    var tileset = scene.addTileset({
        id: 'test-tileset',
        url: tiles3DLayerUrl,
    });

    var tileset_3dgs = scene.addTileset({
        id: 'test-tileset',
        url: 'http://localhost:8804/splat-3dtiles/NNU_2_opt/tileset.json',
        isGaussianSplatting: true, // é»˜è®¤ä¸º falseï¼Œå¦‚æœæ¨¡å‹æœ‰3DGSæ•ˆæœï¼Œè¯·è®¾ç½®ä¸º true
        maxGaussianSplatingCount: 4096 * 4096, // å½“æ•°æ®é‡å¤§æ—¶ï¼Œå¯è°ƒé«˜åˆ° 8192 * 8192
    });

    scene.addModel({
        id: 'NNU_2_new',
        rootUrl: './data/splats/',
        fileNames: 'surveyhouse.splat',
        position: [118.9062412507131, 32.10569531706962],
        rotation: [-90, 0, 0],
        scale: 1,
        offset: [0, 0, -30],
    });

    scene.addModel({
        id: 'SM_Tesla',
        rootUrl: './data/meshes/',
        fileNames: 'SM_Tesla.glb',
        position: [118.91083364082562, 32.116922266350315],
        rotation: [90, 0, 0],
        scale: 1,
        offset: [-26.8, -4.2, 1.6],
    });

    scene.addMesh({
        id: fenceData,
        data: fenceData,
        type: 'fence',
        color: fenceColor,
        opacity: 0.7,
        material: 'ripple',
        num: 5,
        speed: 1,
        getElevation: 20,
    });

    // æ·»åŠ é“è·¯çº¿
    scene.addMesh({
        id: roadData,
        data: `./data/suzhou/${roadData}`,
        type: 'tube',
        material: {
            map: texture,
            transparent: true,
            side: THREE.BackSide,
            depthWrite: true,
            depthTest: true,
            opacity: 1.0,
            color: color,
        },
        getTubeRadius: radius,
        speed: speed,
    });

    // æ·»åŠ å»ºç­‘
    scene.addMesh({
        id: 'building-layer',
        data: './data/suzhou/buildings.geojson',
        type: 'building',
        color: '#18396E',
        getElevation: (f) => f.properties.height || f.properties.HEIGHT,
        opacity: 1.0,
        gradient: true,
        gradientColor: ['#18396E', '#AEFFFF'],
        gradientHeightMax: 100,
        gradientHeightMin: 0,
        lightColor: '#6EFFFF',
        lightCircleTime: 20,
        lightBorderWidth: 0.02,
        lightMixRate: 0.0,
        enableEdge: true,
        material: {
            edge: {
                color: 'black',
                opacity: 0.1,
                width: 2,
            },
        },
    });
});
```

## âœï¸ ä½œè€…è¯´æ˜ <a name = "authors"></a>

æ¨å»ºé¡º
